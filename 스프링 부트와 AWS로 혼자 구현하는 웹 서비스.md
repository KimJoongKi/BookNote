## EC2 인스턴스 생성하기
* EC2는 AWS에서 제공하는 성능, 용량 등을 유동적으로 사용할 수 있는 서버입니다.
> EC2의 이름은 Elastic Computer Cloud에서 C가 2개가 있어 C2라는 이름이   
> 붙었습니다.   
> AWS에서는 대부분 첫 글자가 중복되면 숫자로 표기합니다.   
> 비슷한 예로 AWS의 S3는 Simple Storage Service를 줄여서 S가 3개라고 하여   
> S3입니다.  

* AWS에서 무료로 제공하는 프리티어 플랜에서는 EC2 사용에 다음과 같은 제한이 
있습니다.
> 사양이 t2.micro만 가능합니다.* vCPU(가상 CPU) 1 Core, 메모리 1GB 사양입니다.  
> * 보통 vCPU는 물리 CPU 사양의 절반 정도의 성능을 가집니다.  
> 월 750시간의 제한이 있습니다. 초과하면 비용이 부과됩니다.  
> * 24시간*31일=744시간입니다.  
> * 즉, 1대의 t2.micro만 사용한다면 24시간 사용할 수 있습니다.  

* 리전이란 AWS의 서비스가 구동될 지역을 이야기합니다.
* AMI(Amazon Machine Image, 아마존 머신 이미지)
	* EC2 인스턴스를 시작하는 데 필요한 정보를 이미지로 만들어 둔 것을 이야기합니다.
	* 인스턴스라는 가상 머신에 운영체제 등을 설치할 수 있게 구워 넣은 이미지로 생각하면 됩니다.
* t2.micro를 선택합니다.
	* t2는 요금 타입을 이야기하며, micro는 사양을 이야기합니다.
	* 이들은 다른 서비스와 달리 크레딧이란 일종의 CPU를 사용할 수 있는 포인트 개념이
	있습니다. 인스턴스 크기에 따라 정해진 비율로 CPU 크레딧을 계속 받게 되며, 
        사용하지 않을 때는 크레딧을 축적하고, 사요할 때 이 크레딧을 사용합니다.
	* 정해진 사양보다 더 높은 트래픽이 오면 크레딧을 좀 더 적극적으로 사용하면서 트래픽을 처리하지만, 크레딧이 모두 사용되면 더이상 EC2를 사용 할 수 없습니다.
	* 그래서 트래픽이 높은 서비스들은 T 시리즈를 쓰지 않고 다른 시리즈를 사용하기도
	합니다.
* 태그에는 웹 콘솔에서 표기될 태그인 Name 태그를 등록합니다.
	* 태그는 해당 인스턴스를 표현하는 여러 이름으로 사용될 수 있습니다.
	* EC2의 이름을 붙인다고 생각하고 넣으면 됩니다.
* 보안 그룹은 방화벽을 이야기합니다.
	* 방화벽이 AWS에서는 보안 그룹으로 사용됩니다.
	* 유형 항목에서 SSH이면서 포트 항목에서 22인 경우는 AWS EC2에 터미널로 접속할 때를 이야기합니다.
	* pem 키가 없으면 접속이 안 되니 전체 오픈(0.0.0.0/0, ::/0)하는 경우를 종종 발견합니다.
	* 이렇게 되면 이후 파일 공유 디렉토리나 깃허브 등에 실수로 pem 키가 노출되는 순간 서버에서 가상화폐가 채굴되는 것을 볼 수 있습니다.
	* 보안은 언제나 높을수록 좋으니 pem 키 관리와 지정된 IP에서만 ssh 접속이 가능하도록 구성하는 것이 안전합니다.
	* 그래서 본인 집의 IP를 기본적으로 추가하고(내 IP를 선택하면 현재 접속한 장소의 
	IP가 자동 지정됩니다)
	* 카페와 같이 집 외에 다른 장소에서 접속할 때는 해당 장소의 IP를 다시 SSH 규칙에
	추가하는 것이 안전합니다.
* 탄력적 IP는 생성하고 EC2 서버에 연결하지 않으면 비용이 발생합니다.
* 즉, 생성한 탄력적 IP는 무조건 EC2에 바로 연결해야 하며 만약 더는 사용할 인스턴스가
없을 때도 탄력적 IP를 삭제해야 합니다.
> 오랜 시간 접속이 안되거나, 권한이 없어서 안 된다고 메시지가 나온다면 다음과 같이  
> 확인해 보는 것이 좋습니다.1. HostName 값이 정확히 탄력적 IP로 되어있는지 확인  
> 2. EC2 인스턴스가 running 상태인지 확인  
> 3. EC2 인스턴스의 보안그룹 -> 인바운드 규칙에서 현재 본인의 IP가 등록되어   
> 있는지 확인  

* AWS와 같은 외부 서버로 SSH 접속을 하려면 매번 다음과 같이 긴 명령어를 
입력해야 합니다.
> ssh -i pem 키 위치 EC2의 탄력적 IP 주소  

* 위 방법은 귀찮으므로 아래 방법으로 사용
> cp pem 키를 내려받은 위치 ~/.ssh/  

* 이후부터는 별도로 pem 키 위치를 명령어로 지정할 필요가 없게 됩니다.
* 키를 이동 후 키의 권한을 변경합니다.
> chmod 600 ~_.ssh_pem키이름  

* 권한을 변경하였다면 pem 키가 있는 ~/.ssh 디렉토리에 config 파일을 생성합니다.
> vim ~_.ssh_config  

* 다음과 같이 본인이 원하는 Host로 등록합니다.
	* Host를 앞으로 접속할 키 값으로 보면 됩니다.
	* 예를 들어 Host abc로 등록하시면 ssh abc로 해당 EC2로 접속할 수 있게 됩니다.
	* Host 외에 HostName은 탄력적 IP 주소를 사용하면 됩니다.
> # 주석Host 본인이 원하는 서비스명  
> HostName ec2의 탄력적 IP 주소  
> User ec2-user  
> IdentifyFile ~_.ssh_pem키 이름  

* 생성된 config 파일은 실행 권한이 필요하므로 권한 설정을 다음과 같이 설정합니다.
> chmod 700 ~_.ssh_config  

* 실행 권한까지 설정했다면 다음의 명령어로 접속해 봅니다.
> ssh config에 등록한 서비스명  

